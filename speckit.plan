# Ğ¢ĞµÑ…Ğ½Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ Ğ¿Ğ»Ğ°Ğ½: Landscape AI App

## ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ½Ğ°Ñ ÑÑ‚Ñ€Ğ°Ñ‚ĞµĞ³Ğ¸Ñ

### Clean Architecture Implementation
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Presentation               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   Widgets   â”‚  â”‚   ViewModels    â”‚  â”‚
â”‚  â”‚   (UI)      â”‚  â”‚   (State Mgmt)  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               Domain                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Entities   â”‚  â”‚   Use Cases     â”‚  â”‚
â”‚  â”‚  (Models)   â”‚  â”‚  (Business)     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                Data                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Repositoriesâ”‚  â”‚  Data Sources   â”‚  â”‚
â”‚  â”‚ (Abstraction)â”‚  â”‚  (API/DB)      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Ğ¢ĞµÑ…Ğ½Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ ÑÑ‚ĞµĞº

#### Core Framework
- **Flutter SDK**: 3.24.0+ (stable channel)
- **Dart**: 3.5.0+
- **Target Platforms**: Android (API 21+), iOS (12.0+), Web

#### State Management
- **Provider**: 6.1.2+ Ğ´Ğ»Ñ Ğ¿Ñ€Ğ¾ÑÑ‚Ğ¾Ğ³Ğ¾ state management
- **Riverpod**: 2.4.9+ ĞºĞ°Ğº Ğ°Ğ»ÑŒÑ‚ĞµÑ€Ğ½Ğ°Ñ‚Ğ¸Ğ²Ğ° (Ğ±ÑƒĞ´ÑƒÑ‰Ğ¸Ğµ Ğ²ĞµÑ€ÑĞ¸Ğ¸)
- **Bloc**: 8.1.4+ Ğ´Ğ»Ñ ÑĞ»Ğ¾Ğ¶Ğ½Ğ¾Ğ¹ Ğ±Ğ¸Ğ·Ğ½ĞµÑ-Ğ»Ğ¾Ğ³Ğ¸ĞºĞ¸

#### Dependency Injection
- **GetIt**: 7.7.0+ Ğ´Ğ»Ñ DI ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ğ°
- **Injectable**: 2.6.1+ Ğ´Ğ»Ñ code generation
- **Build Runner**: 2.4.9+ Ğ´Ğ»Ñ Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸ ĞºĞ¾Ğ´Ğ°

#### Networking & API
- **Dio**: 5.4.3+ Ğ´Ğ»Ñ HTTP ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ğ°
- **Retrofit**: 4.1.0+ Ğ´Ğ»Ñ API Ğ¸Ğ½Ñ‚ĞµÑ€Ñ„ĞµĞ¹ÑĞ¾Ğ²
- **Connectivity Plus**: 5.0.2+ Ğ´Ğ»Ñ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ¸ ÑĞµÑ‚Ğ¸

#### Local Storage
- **SQLite**: sqflite 2.3.3+ Ğ´Ğ»Ñ ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
- **Hive**: 2.2.3+ Ğ´Ğ»Ñ ĞºÑÑˆĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ Ğ¸ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾ĞµĞº
- **Shared Preferences**: 2.2.2+ Ğ´Ğ»Ñ Ğ¿Ñ€Ğ¾ÑÑ‚Ñ‹Ñ… Ğ½Ğ°ÑÑ‚Ñ€Ğ¾ĞµĞº

#### AI Integration
- **HTTP Client**: Ğ´Ğ»Ñ Ğ¿Ñ€ÑĞ¼Ñ‹Ñ… API Ğ²Ñ‹Ğ·Ğ¾Ğ²Ğ¾Ğ² Ñ Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ¾Ğ¹ Ğ¿Ñ€Ğ¾ĞºÑĞ¸
- **Custom AI Service**: Ğ¾Ğ±ĞµÑ€Ñ‚ĞºĞ° Ğ´Ğ»Ñ OpenAI/Gemini Ñ fallback Ğ¼ĞµÑ…Ğ°Ğ½Ğ¸Ğ·Ğ¼Ğ°Ğ¼Ğ¸
- **Proxy Support**: Ğ¾Ğ±ÑĞ·Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ğ¾Ğµ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¿Ñ€Ğ¾ĞºÑĞ¸ Ğ´Ğ»Ñ API Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ²
- **Fallback Keys**: Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¾Ğµ Ğ¿ĞµÑ€ĞµĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ Ğ½Ğ° Ñ€ĞµĞ·ĞµÑ€Ğ²Ğ½Ñ‹Ğµ ĞºĞ»ÑÑ‡Ğ¸ Ğ¿Ñ€Ğ¸ Ğ¸ÑÑ‡ĞµÑ€Ğ¿Ğ°Ğ½Ğ¸Ğ¸ Ñ€ĞµÑÑƒÑ€ÑĞ¾Ğ²
- **Error Handling**: graceful degradation Ñ retry Ğ»Ğ¾Ğ³Ğ¸ĞºĞ¾Ğ¹

#### Navigation & Routing
- **Go Router**: 14.2.3+ Ğ´Ğ»Ñ Ğ´ĞµĞºĞ»Ğ°Ñ€Ğ°Ñ‚Ğ¸Ğ²Ğ½Ğ¾Ğ¹ Ğ½Ğ°Ğ²Ğ¸Ğ³Ğ°Ñ†Ğ¸Ğ¸
- **Deep Linking**: Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ° URL ÑÑ…ĞµĞ¼

#### UI & Design
- **Material Design 3**: Ğ²ÑÑ‚Ñ€Ğ¾ĞµĞ½Ğ½Ğ°Ñ Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ° Flutter
- **Responsive Design**: adaptive layouts
- **Custom Themes**: ÑĞ²ĞµÑ‚Ğ»Ğ°Ñ/Ñ‚ĞµĞ¼Ğ½Ğ°Ñ Ñ‚ĞµĞ¼Ñ‹

#### Testing
- **Flutter Test**: unit Ğ¸ widget Ñ‚ĞµÑÑ‚Ñ‹
- **Integration Test**: end-to-end Ñ‚ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ
- **Mockito**: 5.4.4+ Ğ´Ğ»Ñ Ğ¼Ğ¾ĞºĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ
- **Golden Tests**: Ğ´Ğ»Ñ UI Ñ€ĞµĞ³Ñ€ĞµÑÑĞ¸Ğ¹

#### Code Quality
- **Flutter Lints**: 4.0.0+ Ğ´Ğ»Ñ ÑÑ‚Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¾Ğ³Ğ¾ Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·Ğ°
- **Very Good Analysis**: 6.0.0+ Ğ´Ğ»Ñ Ñ€Ğ°ÑÑˆĞ¸Ñ€ĞµĞ½Ğ½Ñ‹Ñ… Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»
- **Dart Format**: Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¾Ğµ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ
- **Coverage**: Ğ¸Ğ·Ğ¼ĞµÑ€ĞµĞ½Ğ¸Ğµ Ğ¿Ğ¾ĞºÑ€Ñ‹Ñ‚Ğ¸Ñ Ñ‚ĞµÑÑ‚Ğ°Ğ¼Ğ¸

## Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°

### Ğ”Ğ¸Ñ€ĞµĞºÑ‚Ğ¾Ñ€Ğ¸Ğ¸
```
lib/
â”œâ”€â”€ main.dart                 # Entry point
â”œâ”€â”€ app/                      # App configuration
â”‚   â”œâ”€â”€ app.dart             # Main app widget
â”‚   â”œâ”€â”€ router.dart          # Navigation configuration
â”‚   â”œâ”€â”€ theme.dart           # Theme configuration
â”‚   â””â”€â”€ constants/           # App constants
â”œâ”€â”€ core/                     # Core functionality
â”‚   â”œâ”€â”€ constants/           # Global constants
â”‚   â”œâ”€â”€ errors/              # Error handling
â”‚   â”œâ”€â”€ network/             # Network configuration with proxy support
â”‚   â”œâ”€â”€ storage/             # Storage abstractions
â”‚   â”œâ”€â”€ utils/               # Utility functions
â”‚   â”œâ”€â”€ extensions/          # Dart extensions
â”‚   â””â”€â”€ localization/        # Localization support (EN/RU)
â”œâ”€â”€ features/                 # Feature modules
â”‚   â”œâ”€â”€ chat/                # Chat feature with AI agents
â”‚   â”‚   â”œâ”€â”€ data/            # Data layer
â”‚   â”‚   â”‚   â”œâ”€â”€ datasources/ # API & local sources with proxy support
â”‚   â”‚   â”‚   â”œâ”€â”€ models/      # Data models
â”‚   â”‚   â”‚   â””â”€â”€ repositories/ # Repository implementations
â”‚   â”‚   â”œâ”€â”€ domain/          # Domain layer
â”‚   â”‚   â”‚   â”œâ”€â”€ entities/    # Business entities (AI agents, messages)
â”‚   â”‚   â”‚   â”œâ”€â”€ repositories/ # Repository interfaces
â”‚   â”‚   â”‚   â””â”€â”€ usecases/    # Business logic
â”‚   â”‚   â””â”€â”€ presentation/    # Presentation layer
â”‚   â”‚       â”œâ”€â”€ pages/       # UI pages
â”‚   â”‚       â”œâ”€â”€ widgets/     # Reusable widgets
â”‚   â”‚       â””â”€â”€ providers/   # State management
â”‚   â”œâ”€â”€ settings/            # Settings feature with localization
â”‚   â””â”€â”€ profile/             # User profile
â”œâ”€â”€ shared/                   # Shared components
â”‚   â”œâ”€â”€ widgets/             # Common widgets
â”‚   â”œâ”€â”€ models/              # Shared models
â”‚   â”œâ”€â”€ services/            # Shared services
â”‚   â””â”€â”€ utils/               # Shared utilities
â””â”€â”€ di/                      # Dependency injection
    â””â”€â”€ injection.dart       # DI configuration
```

### ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ğ¾Ğ½Ğ½Ñ‹Ğµ Ñ„Ğ°Ğ¹Ğ»Ñ‹
```
â”œâ”€â”€ pubspec.yaml             # Dependencies
â”œâ”€â”€ analysis_options.yaml    # Linting rules
â”œâ”€â”€ .gitignore              # Git ignore rules
â”œâ”€â”€ .github/                # GitHub workflows
â”‚   â””â”€â”€ workflows/
â”‚       â”œâ”€â”€ android.yml     # Android CI/CD
â”‚       â”œâ”€â”€ ios.yml         # iOS CI/CD
â”‚       â””â”€â”€ web.yml         # Web CI/CD
â”œâ”€â”€ android/                # Android configuration
â”œâ”€â”€ ios/                    # iOS configuration
â”œâ”€â”€ web/                    # Web configuration
â”œâ”€â”€ test/                   # Unit tests
â”œâ”€â”€ integration_test/       # Integration tests
â””â”€â”€ scripts/                # Build scripts
    â”œâ”€â”€ build.sh           # Linux/macOS build
    â””â”€â”€ build.ps1          # Windows build
```

## CI/CD Pipeline

### GitHub Actions Workflow

#### Android Build
```yaml
name: Android Build & Test
on: [push, pull_request]
jobs:
  android:
    runs-on: ubuntu-latest
    steps:
      - checkout
      - setup-java@v4 (Java 17)
      - setup-flutter@v2 (3.24.0)
      - flutter pub get
      - flutter analyze
      - flutter test --coverage
      - flutter build apk --debug
      - flutter build appbundle --release (main branch)
```

#### iOS Build
```yaml
name: iOS Build & Test
on: [push]
jobs:
  ios:
    runs-on: macos-latest
    steps:
      - checkout
      - setup-flutter@v2 (3.24.0)
      - flutter pub get
      - cd ios && pod install
      - flutter analyze
      - flutter test
      - flutter build ios --simulator
      - flutter build ios --release --no-codesign (main branch)
```

#### Web Build
```yaml
name: Web Build & Deploy
on: [push]
jobs:
  web:
    runs-on: ubuntu-latest
    steps:
      - checkout
      - setup-flutter@v2 (3.24.0)
      - flutter config --enable-web
      - flutter pub get
      - flutter analyze
      - flutter test
      - flutter build web --debug
      - flutter build web --release (main branch)
      - deploy-to-firebase (main branch)
```

### Quality Gates
- **Code Analysis**: dart analyze Ğ±ĞµĞ· warnings
- **Test Coverage**: Ğ¼Ğ¸Ğ½Ğ¸Ğ¼ÑƒĞ¼ 90% Ğ´Ğ»Ñ ĞºÑ€Ğ¸Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¾Ğ¹ Ğ»Ğ¾Ğ³Ğ¸ĞºĞ¸
- **Format Check**: dart format --set-exit-if-changed
- **Build Success**: ÑƒÑĞ¿ĞµÑˆĞ½Ğ°Ñ ÑĞ±Ğ¾Ñ€ĞºĞ° Ğ½Ğ° Ğ²ÑĞµÑ… Ğ¿Ğ»Ğ°Ñ‚Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ…

## Development Workflow

### Git Strategy
- **Main Branch**: ÑÑ‚Ğ°Ğ±Ğ¸Ğ»ÑŒĞ½Ğ°Ñ Ğ²ĞµÑ€ÑĞ¸Ñ Ğ´Ğ»Ñ Ğ¿Ñ€Ğ¾Ğ´Ğ°ĞºÑˆĞµĞ½Ğ°
- **Develop Branch**: Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ğ¾Ğ½Ğ½Ğ°Ñ Ğ²ĞµÑ‚ĞºĞ° Ğ´Ğ»Ñ Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸
- **Feature Branches**: feature/feature-name Ğ´Ğ»Ñ Ğ½Ğ¾Ğ²Ñ‹Ñ… Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¹
- **Hotfix Branches**: hotfix/issue-description Ğ´Ğ»Ñ ĞºÑ€Ğ¸Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ñ… Ğ¸ÑĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğ¹

### Code Review Process
1. **Self Review**: Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ° ÑĞ¾Ğ±ÑÑ‚Ğ²ĞµĞ½Ğ½Ğ¾Ğ³Ğ¾ ĞºĞ¾Ğ´Ğ°
2. **Automated Checks**: CI/CD pipeline
3. **Peer Review**: Ğ¼Ğ¸Ğ½Ğ¸Ğ¼ÑƒĞ¼ Ğ¾Ğ´Ğ¸Ğ½ reviewer
4. **Testing**: Ğ»Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ğ¾Ğµ Ñ‚ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ
5. **Merge**: Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ¿Ğ¾ÑĞ»Ğµ Ğ²ÑĞµÑ… Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€Ğ¾Ğº

### Testing Strategy
- **Unit Tests**: Ğ´Ğ»Ñ Ğ±Ğ¸Ğ·Ğ½ĞµÑ-Ğ»Ğ¾Ğ³Ğ¸ĞºĞ¸ (Use Cases)
- **Widget Tests**: Ğ´Ğ»Ñ UI ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ğ¾Ğ²
- **Integration Tests**: Ğ´Ğ»Ñ Ğ¿Ğ¾Ğ»Ğ½Ñ‹Ñ… Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒÑĞºĞ¸Ñ… ÑÑ†ĞµĞ½Ğ°Ñ€Ğ¸ĞµĞ²
- **Golden Tests**: Ğ´Ğ»Ñ UI Ñ€ĞµĞ³Ñ€ĞµÑÑĞ¸Ğ¹

## Performance Optimization

### Build Optimization
- **Tree Shaking**: ÑƒĞ´Ğ°Ğ»ĞµĞ½Ğ¸Ğµ Ğ½ĞµĞ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµĞ¼Ğ¾Ğ³Ğ¾ ĞºĞ¾Ğ´Ğ°
- **Code Splitting**: Ñ€Ğ°Ğ·Ğ´ĞµĞ»ĞµĞ½Ğ¸Ğµ ĞºĞ¾Ğ´Ğ° Ğ¿Ğ¾ Ñ„Ğ¸Ñ‡Ğ°Ğ¼
- **Asset Optimization**: ÑĞ¶Ğ°Ñ‚Ğ¸Ğµ Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğ¹ Ğ¸ Ñ€ĞµÑÑƒÑ€ÑĞ¾Ğ²
- **Bundle Analysis**: Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ· Ñ€Ğ°Ğ·Ğ¼ĞµÑ€Ğ° Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ

### Runtime Optimization
- **Lazy Loading**: Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° Ğ¿Ğ¾ Ñ‚Ñ€ĞµĞ±Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ
- **Caching Strategy**: ÑÑ„Ñ„ĞµĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾Ğµ ĞºÑÑˆĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ
- **Memory Management**: Ğ¿Ñ€ĞµĞ´Ğ¾Ñ‚Ğ²Ñ€Ğ°Ñ‰ĞµĞ½Ğ¸Ğµ ÑƒÑ‚ĞµÑ‡ĞµĞº
- **Network Optimization**: Ğ¼Ğ¸Ğ½Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ²

## Security Considerations

### API Security
- **API Key Management**: Ğ±ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾Ğµ Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ ĞºĞ»ÑÑ‡ĞµĞ¹
- **Rate Limiting**: Ğ¿Ñ€ĞµĞ´Ğ¾Ñ‚Ğ²Ñ€Ğ°Ñ‰ĞµĞ½Ğ¸Ğµ Ğ·Ğ»Ğ¾ÑƒĞ¿Ğ¾Ñ‚Ñ€ĞµĞ±Ğ»ĞµĞ½Ğ¸Ğ¹
- **Input Validation**: Ğ²Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ Ğ²ÑĞµÑ… Ğ²Ñ…Ğ¾Ğ´Ğ½Ñ‹Ñ… Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
- **HTTPS Only**: ÑˆĞ¸Ñ„Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ²ÑĞµÑ… ÑĞ¾ĞµĞ´Ğ¸Ğ½ĞµĞ½Ğ¸Ğ¹

### Data Protection
- **Local Encryption**: ÑˆĞ¸Ñ„Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ñ‡ÑƒĞ²ÑÑ‚Ğ²Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ñ… Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
- **Secure Storage**: Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ secure storage APIs
- **Privacy by Design**: Ğ¼Ğ¸Ğ½Ğ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ğ°Ñ ĞºĞ¾Ğ»Ğ»ĞµĞºÑ†Ğ¸Ñ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
- **GDPR Compliance**: ÑĞ¾Ğ¾Ñ‚Ğ²ĞµÑ‚ÑÑ‚Ğ²Ğ¸Ğµ Ñ‚Ñ€ĞµĞ±Ğ¾Ğ²Ğ°Ğ½Ğ¸ÑĞ¼ Ğ¿Ñ€Ğ¸Ğ²Ğ°Ñ‚Ğ½Ğ¾ÑÑ‚Ğ¸

## Monitoring & Analytics

### Error Tracking
- **Crash Reporting**: Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ ÑĞ±Ğ¾Ñ€ crash reports
- **Error Logging**: Ğ´ĞµÑ‚Ğ°Ğ»ÑŒĞ½Ğ¾Ğµ Ğ»Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¾ÑˆĞ¸Ğ±Ğ¾Ğº
- **Performance Monitoring**: Ğ¾Ñ‚ÑĞ»ĞµĞ¶Ğ¸Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¿Ñ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚Ğ¸

### User Analytics
- **Usage Metrics**: Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¹
- **Performance Metrics**: Ğ²Ñ€ĞµĞ¼Ñ Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ¸, Ğ¾Ñ‚Ğ·Ñ‹Ğ²Ñ‡Ğ¸Ğ²Ğ¾ÑÑ‚ÑŒ
- **User Journey**: Ğ¿ÑƒÑ‚Ğ¸ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ĞµĞ¹ Ğ² Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğ¸

## Deployment Strategy

### Staging Environment
- **Development Builds**: Ğ´Ğ»Ñ Ğ²Ğ½ÑƒÑ‚Ñ€ĞµĞ½Ğ½ĞµĞ³Ğ¾ Ñ‚ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ
- **Staging Server**: Ğ´Ğ»Ñ QA Ñ‚ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ
- **Feature Flags**: Ğ´Ğ»Ñ Ğ¿Ğ¾ÑÑ‚ĞµĞ¿ĞµĞ½Ğ½Ğ¾Ğ³Ğ¾ Ñ€Ğ°Ğ·Ğ²ĞµÑ€Ñ‚Ñ‹Ğ²Ğ°Ğ½Ğ¸Ñ

### Production Deployment
- **Gradual Rollout**: Ğ¿Ğ¾ÑÑ‚ĞµĞ¿ĞµĞ½Ğ½Ğ¾Ğµ Ñ€Ğ°Ğ·Ğ²ĞµÑ€Ñ‚Ñ‹Ğ²Ğ°Ğ½Ğ¸Ğµ
- **A/B Testing**: Ñ‚ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ½Ğ¾Ğ²Ñ‹Ñ… Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¹
- **Rollback Strategy**: Ğ¿Ğ»Ğ°Ğ½ Ğ¾Ñ‚ĞºĞ°Ñ‚Ğ° Ğ¿Ñ€Ğ¸ Ğ¿Ñ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ°Ñ…

## Maintenance & Updates

### Version Management
- **Semantic Versioning**: MAJOR.MINOR.PATCH
- **Changelog**: Ğ´ĞµÑ‚Ğ°Ğ»ÑŒĞ½Ğ¾Ğµ Ğ¾Ğ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğ¹
- **Migration Guides**: Ñ€ÑƒĞºĞ¾Ğ²Ğ¾Ğ´ÑÑ‚Ğ²Ğ° Ğ¿Ğ¾ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ñ

### Dependency Management
- **Regular Updates**: Ñ€ĞµĞ³ÑƒĞ»ÑÑ€Ğ½Ğ¾Ğµ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚ĞµĞ¹
- **Security Patches**: Ğ±Ñ‹ÑÑ‚Ñ€Ğ¾Ğµ Ğ¿Ñ€Ğ¸Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğµ security patches
- **Breaking Changes**: Ğ¿Ğ»Ğ°Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ breaking changes

## AI Integration Plan

### Ğ¡Ğ¿ĞµÑ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğµ AI ĞĞ³ĞµĞ½Ñ‚Ñ‹
- **Ğ¡Ğ°Ğ´Ğ¾Ğ²Ğ¾Ğ´ (Gardener)**: ÑĞºÑĞ¿ĞµÑ€Ñ‚ Ğ¿Ğ¾ Ñ€Ğ°ÑÑ‚ĞµĞ½Ğ¸ÑĞ¼, ÑƒÑ…Ğ¾Ğ´Ñƒ Ğ¸ ÑĞµĞ·Ğ¾Ğ½Ğ½Ñ‹Ğ¼ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°Ğ¼
- **Ğ›Ğ°Ğ½Ğ´ÑˆĞ°Ñ„Ñ‚Ğ½Ñ‹Ğ¹ Ğ´Ğ¸Ğ·Ğ°Ğ¹Ğ½ĞµÑ€ (Landscape Designer)**: Ğ¿Ğ»Ğ°Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ ÑƒÑ‡Ğ°ÑÑ‚ĞºĞ¾Ğ² Ğ¸ Ğ·Ğ¾Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ
- **Ğ¡Ñ‚Ñ€Ğ¾Ğ¸Ñ‚ĞµĞ»ÑŒ (Builder)**: Ğ¼Ğ°Ñ‚ĞµÑ€Ğ¸Ğ°Ğ»Ñ‹, Ñ‚ĞµÑ…Ğ½Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ğ¸ Ğ¸ ÑÑ‚Ñ€Ğ¾Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğµ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‹
- **Ğ­ĞºĞ¾Ğ»Ğ¾Ğ³ (Ecologist)**: ÑĞºĞ¾Ğ»Ğ¾Ğ³Ğ¸Ñ‡Ğ½Ñ‹Ğµ Ñ€ĞµÑˆĞµĞ½Ğ¸Ñ Ğ¸ ÑƒÑÑ‚Ğ¾Ğ¹Ñ‡Ğ¸Ğ²Ğ¾Ğµ Ñ€Ğ°Ğ·Ğ²Ğ¸Ñ‚Ğ¸Ğµ

### API Configuration
```dart
// Environment variables from .env
OPENAI_API_KEY="sk-proj-..."
GOOGLE_API_KEY="AIzaSy..."
GOOGLE_API_KEYS_FALLBACK="AIzaSy..."

// Proxy configuration
ALL_PROXY="socks5h://user:pass@proxy:port"
BACKUP_PROXIES="socks5h://user:pass@proxy1:port,socks5h://user:pass@proxy2:port"
```

### Proxy Support Implementation
- **Primary Proxy**: Ğ¾ÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğ¹ Ğ¿Ñ€Ğ¾ĞºÑĞ¸ Ğ´Ğ»Ñ Ğ²ÑĞµÑ… API Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ²
- **Backup Proxies**: Ñ€ĞµĞ·ĞµÑ€Ğ²Ğ½Ñ‹Ğµ Ğ¿Ñ€Ğ¾ĞºÑĞ¸ Ğ¿Ñ€Ğ¸ Ğ½ĞµĞ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ğ¾ÑÑ‚Ğ¸ Ğ¾ÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğ³Ğ¾
- **Fallback Keys**: Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¾Ğµ Ğ¿ĞµÑ€ĞµĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ Ğ½Ğ° Ñ€ĞµĞ·ĞµÑ€Ğ²Ğ½Ñ‹Ğµ API ĞºĞ»ÑÑ‡Ğ¸
- **Resource Exhausted Handling**: Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Ğ¾ÑˆĞ¸Ğ±ĞºĞ¸ "Ñ€ĞµÑÑƒÑ€Ñ Ğ¸ÑÑ‡ĞµÑ€Ğ¿Ğ°Ğ½"

### Localization Continuation
- **ĞŸÑ€Ğ¾Ğ´Ğ¾Ğ»Ğ¶ĞµĞ½Ğ¸Ğµ Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸** Ñ Ğ¿Ğ¾Ğ»Ğ½Ğ¾Ğ¹ Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ¾Ğ¹ Ğ»Ğ¾ĞºĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸ (EN/RU)
- **Ğ’ÑĞµ Ğ½Ğ¾Ğ²Ñ‹Ğµ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¸** Ğ´Ğ¾Ğ»Ğ¶Ğ½Ñ‹ Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶Ğ¸Ğ²Ğ°Ñ‚ÑŒ Ğ¾Ğ±Ğ° ÑĞ·Ñ‹ĞºĞ°
- **AI Ğ¾Ñ‚Ğ²ĞµÑ‚Ñ‹** Ğ½Ğ° ÑĞ·Ñ‹ĞºĞµ Ğ²Ñ‹Ğ±Ñ€Ğ°Ğ½Ğ½Ğ¾Ğ¼ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ĞµĞ¼
- **Ğ¡Ğ¿ĞµÑ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ¿Ñ€Ğ¾Ğ¼Ğ¿Ñ‚Ñ‹** Ğ´Ğ»Ñ ĞºĞ°Ğ¶Ğ´Ğ¾Ğ³Ğ¾ Ğ°Ğ³ĞµĞ½Ñ‚Ğ° Ğ½Ğ° Ğ¾Ğ±Ğ¾Ğ¸Ñ… ÑĞ·Ñ‹ĞºĞ°Ñ…

## Development Roadmap

### ğŸ“Š Project Status Overview
- **Phase 1: AI Integration Foundation** âœ… **COMPLETED (100%)**
- **Phase 2: Chat Implementation** âœ… **COMPLETED (100%)**
- **Phase 3: Local Storage** âœ… **COMPLETED (90%)**
- **Phase 4: Advanced Features** â³ **PENDING (0%)**
- **Phase 5: Testing & Quality** â³ **PENDING (5%)**
- **Phase 6: Deployment** â³ **PENDING (0%)**

**Overall Project Completion: 75%**

### Phase 1: AI Integration Foundation âœ… COMPLETED
- âœ… Environment configuration with proxy support
- âœ… AI Service with OpenAI and Google Gemini integration
- âœ… Fallback mechanisms for API keys and proxies
- âœ… Specialized AI agents (Gardener, Landscape Designer, Builder, Ecologist)
- âœ… Localization support for AI agents

### Phase 2: Chat Implementation âœ… COMPLETED

#### 2.1 ChatProvider Implementation âœ… COMPLETED
```dart
// lib/features/chat/presentation/providers/chat_provider.dart
class ChatProvider extends ChangeNotifier {
  // âœ… State management for chat messages
  // âœ… AI agent selection with smart selection
  // âœ… Message sending/receiving with typing indicators
  // âœ… Error handling and retry logic
  // âœ… Session management and persistence
  // âœ… Language provider integration
}
```

#### 2.2 Message Models âœ… COMPLETED
```dart
// lib/features/chat/domain/entities/message.dart
class Message {
  final String id;
  final String content;
  final MessageType type; // user, ai, system, typing
  final DateTime timestamp;
  final String? agentId;
  final bool isError;
  final bool isTyping;
}
```

#### 2.3 MessageBubble Widget âœ… COMPLETED
```dart
// lib/features/chat/presentation/widgets/message_bubble.dart
class MessageBubble extends StatelessWidget {
  // âœ… User message bubble with proper styling
  // âœ… AI message bubble with agent styling and icons
  // âœ… Typing indicator with animated dots
  // âœ… Error message display with retry button
  // âœ… Timestamp display
  // âœ… Agent header for AI messages
}
```

#### 2.4 Agent Selection UI âœ… COMPLETED
```dart
// lib/features/chat/presentation/widgets/agent_selector.dart
class AgentSelector extends StatelessWidget {
  // âœ… Grid of available agents with cards
  // âœ… Agent cards with icons and descriptions
  // âœ… Current agent indicator in chat header
  // âœ… Smart agent selection based on query content
}
```

#### 2.5 Chat Integration âœ… COMPLETED
- âœ… ChatProvider for comprehensive state management
- âœ… MessageBubble widget for displaying messages with animations
- âœ… Integration of AI Service with chat interface
- âœ… Smart agent selection UI with automatic switching
- âœ… Quick start suggestions for each agent
- âœ… Real-time message updates with typing indicators
- âœ… Error handling and retry logic
- âœ… Welcome screen with agent-specific suggestions
- âœ… Message input with send button and keyboard handling

### Phase 3: Local Storage âœ… COMPLETED (90%)

#### 3.1 Database Setup âœ… COMPLETED (Hive Implementation)
```dart
// lib/core/storage/chat_storage.dart
class ChatStorage {
  // âœ… Hive database initialization
  // âœ… Chat session storage and retrieval
  // âœ… Message persistence and loading
  // âœ… Storage statistics and monitoring
  // âœ… Error handling and recovery
}
```

#### 3.2 Message Repository âœ… COMPLETED
```dart
// lib/features/chat/presentation/providers/chat_provider.dart
class ChatProvider {
  // âœ… Save messages to storage via ChatStorage
  // âœ… Retrieve chat history from storage
  // âœ… Delete sessions and messages
  // âœ… Session management and persistence
  // âœ… Storage integration with state management
}
```

#### 3.3 Hive Cache âœ… COMPLETED
```dart
// lib/core/storage/chat_storage.dart
class ChatStorage {
  // âœ… Cache chat sessions and messages
  // âœ… Offline message storage
  // âœ… Storage statistics and size monitoring
  // âœ… Session management and cleanup
}
```

#### 3.4 Storage Implementation âœ… COMPLETED (90%)
- âœ… Hive database setup for chat history
- âœ… Message persistence and retrieval
- âœ… Session management and storage
- âœ… Storage statistics and monitoring
- âœ… Error handling and recovery
- â³ SQLite database setup for advanced queries (10% pending)
- â³ Advanced offline mode with cached AI responses (10% pending)
- â³ Data synchronization between devices (10% pending)

### Phase 4: Advanced Features (PENDING)

#### 4.1 Message Search Functionality (HIGH PRIORITY)
```dart
// lib/features/chat/domain/entities/search_result.dart
class SearchResult {
  final String messageId;
  final String content;
  final String sessionId;
  final DateTime timestamp;
  final AIAgent? agent;
  final List<String> highlights;
}

// lib/features/chat/domain/usecases/search_messages.dart
class SearchMessagesUseCase {
  Future<List<SearchResult>> execute({
    required String query,
    String? sessionId,
    DateTime? fromDate,
    DateTime? toDate,
    AIAgent? agent,
    MessageType? messageType,
  });
}
```
- â³ Full-text search through message content
- â³ Filter by agents (Gardener, Builder, etc.)
- â³ Filter by date ranges
- â³ Filter by message types (user, ai, system)
- â³ Highlight search results in found text
- â³ Search within specific sessions
- â³ Autocomplete for search queries
- â³ Search history (recent queries)

#### 4.2 Chat Export Capabilities (HIGH PRIORITY)
```dart
// lib/features/chat/domain/entities/export_format.dart
enum ExportFormat { text, markdown, pdf, json, csv }

// lib/features/chat/domain/usecases/export_chat.dart
class ExportChatUseCase {
  Future<String> execute({
    required String sessionId,
    required ExportFormat format,
    bool includeTimestamps = true,
    bool includeAgentInfo = true,
  });
}
```
- â³ Export to TXT - simple text format
- â³ Export to Markdown - formatted text
- â³ Export to PDF - beautifully formatted document
- â³ Export to JSON - structured data
- â³ Export to CSV - for data analysis
- â³ Selective export (by dates, agents)
- â³ Batch export (multiple sessions)
- â³ Export settings (include/exclude elements)

#### 4.3 Offline Mode with Cached Responses (HIGH PRIORITY)
```dart
// lib/core/storage/offline_cache.dart
class OfflineCache {
  Future<void> cacheAIResponse({
    required String query,
    required String response,
    required AIAgent agent,
  });
  Future<String?> getCachedResponse(String query);
  Future<List<CachedResponse>> getAllCachedResponses();
}

// lib/features/chat/domain/usecases/offline_chat.dart
class OfflineChatUseCase {
  Future<Message> processOfflineQuery(String query);
}
```
- â³ Cache AI responses in local database
- â³ Offline search through cached responses
- â³ Local processing of simple queries
- â³ Synchronization when connection restored
- â³ Offline mode indicator in UI
- â³ Message queue for sending when connected
- â³ Warnings about limited functionality
- â³ Automatic switching between online/offline

#### 4.4 Message Threading and Context (MEDIUM PRIORITY)
```dart
// lib/features/chat/domain/entities/message_thread.dart
class MessageThread {
  final String id;
  final String parentMessageId;
  final List<Message> messages;
  final String topic;
  final DateTime createdAt;
}

// lib/features/chat/domain/usecases/create_thread.dart
class CreateThreadUseCase {
  Future<MessageThread> execute({
    required String parentMessageId,
    required String topic,
  });
}
```
- â³ Message branching (replies to specific messages)
- â³ Conversation topics (grouping by topics)
- â³ Contextual memory (AI remembers previous messages)
- â³ Visual connections between messages
- â³ Collapsible branches to save space
- â³ Search within branches and topics
- â³ Export branches separately
- â³ Statistics by topics (activity, popularity)

#### 4.5 Advanced UI Features (MEDIUM PRIORITY)
- â³ Drag & Drop for reordering messages
- â³ Floating action buttons for quick actions
- â³ Hotkeys for navigation
- â³ Agent themes (color schemes for each agent)
- â³ Transition animations between agents
- â³ Sound notifications for new messages
- â³ Vibration (on mobile devices)
- â³ Reading mode (without distracting elements)

#### 4.6 Analytics and Insights (MEDIUM PRIORITY)
```dart
// lib/features/analytics/domain/entities/usage_stats.dart
class UsageStats {
  final int totalMessages;
  final Map<String, int> agentUsage;
  final List<String> popularTopics;
  final Duration averageSessionTime;
}

// lib/features/analytics/domain/usecases/get_insights.dart
class GetInsightsUseCase {
  Future<UsageStats> execute();
}
```
- â³ Usage statistics (messages, time, agents)
- â³ Popular topics and queries
- â³ Activity by days/weeks
- â³ Agent effectiveness (response quality)
- â³ Personal insights (user preferences)
- â³ Recommendations based on history
- â³ Export statistics in various formats
- â³ Period comparison (month to month)

#### 4.7 Advanced Settings and Customization (LOW PRIORITY)
```dart
// lib/features/settings/domain/entities/advanced_settings.dart
class AdvancedSettings {
  final AIProvider preferredProvider;
  final int maxTokens;
  final double temperature;
  final bool enableVoiceInput;
  final bool enableNotifications;
  final String customSystemPrompt;
}
```
- â³ AI settings (provider, model parameters)
- â³ Personal prompts for agents
- â³ Notification settings (types, timing)
- â³ Themes and colors (UI customization)
- â³ Hotkeys (shortcut configuration)
- â³ Autocomplete (enable/disable)
- â³ Settings backup
- â³ Import/export configuration

#### 4.8 Security and Privacy (LOW PRIORITY)
```dart
// lib/core/security/privacy_manager.dart
class PrivacyManager {
  Future<void> encryptSensitiveData(String data);
  Future<void> clearChatHistory();
  Future<void> anonymizeData();
}
```
- â³ Data encryption (sensitive information)
- â³ Chat history anonymization
- â³ Automatic deletion of old messages
- â³ App lock (PIN/biometrics)
- â³ Incognito mode (no history saving)
- â³ Data export (GDPR compliance)
- â³ Data deletion (complete cleanup)
- â³ Access audit (security logs)

#### 4.9 Platform-Specific Features (LOW PRIORITY)
- â³ Android: Widget for quick access, Google Assistant integration
- â³ iOS: Siri Shortcuts, Apple Health integration
- â³ Web: PWA features, push notifications, offline mode
- â³ Desktop: Hotkeys, system notifications
- â³ Cross-platform: Device synchronization

#### Phase 4 Priority Matrix
| Feature | Priority | Complexity | Time Estimate | Dependencies |
|---------|----------|------------|---------------|--------------|
| Message Search | HIGH | Medium | 2-3 weeks | ChatStorage |
| Chat Export | HIGH | Medium | 2-3 weeks | ChatStorage |
| Offline Mode | HIGH | High | 3-4 weeks | AI Service, ChatStorage |
| Message Threading | MEDIUM | High | 3-4 weeks | ChatStorage, UI |
| Advanced UI | MEDIUM | Medium | 2-3 weeks | UI Framework |
| Analytics | MEDIUM | Medium | 2-3 weeks | ChatStorage |
| Advanced Settings | LOW | Low | 1-2 weeks | Settings Framework |
| Security & Privacy | LOW | High | 2-3 weeks | Security Framework |
| Platform Features | LOW | Medium | 2-3 weeks | Platform APIs |

**Total Phase 4 Time Estimate: 8-12 weeks** (with 2-3 developers)

### Phase 5: Testing & Quality (PENDING)
- â³ Unit tests for AI service
- â³ Widget tests for chat interface
- â³ Integration tests for full chat flow
- â³ Performance optimization

### Phase 6: Deployment (PENDING)
- â³ Android build optimization
- â³ iOS build configuration
- â³ Web deployment setup
- â³ CI/CD pipeline completion

## Risk Mitigation

### Technical Risks
- **AI Service Downtime**: fallback Ğ¼ĞµÑ…Ğ°Ğ½Ğ¸Ğ·Ğ¼Ñ‹ Ñ Ğ¿Ñ€Ğ¾ĞºÑĞ¸ Ğ¸ Ñ€ĞµĞ·ĞµÑ€Ğ²Ğ½Ñ‹Ğ¼Ğ¸ ĞºĞ»ÑÑ‡Ğ°Ğ¼Ğ¸
- **Platform Changes**: Ğ°Ğ´Ğ°Ğ¿Ñ‚Ğ°Ñ†Ğ¸Ñ Ğº Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸ÑĞ¼ Ğ¿Ğ»Ğ°Ñ‚Ñ„Ğ¾Ñ€Ğ¼
- **Performance Issues**: Ğ¼Ğ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³ Ğ¸ Ğ¾Ğ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ
- **Proxy Failures**: Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¾Ğµ Ğ¿ĞµÑ€ĞµĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ Ğ½Ğ° Ñ€ĞµĞ·ĞµÑ€Ğ²Ğ½Ñ‹Ğµ Ğ¿Ñ€Ğ¾ĞºÑĞ¸

### Business Risks
- **User Adoption**: Ñ„Ğ¾ĞºÑƒÑ Ğ½Ğ° Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒÑĞºĞ¾Ğ¼ Ğ¾Ğ¿Ñ‹Ñ‚Ğµ Ñ Ğ»Ğ¾ĞºĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸ĞµĞ¹
- **Competition**: ÑƒĞ½Ğ¸ĞºĞ°Ğ»ÑŒĞ½Ñ‹Ğµ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¸ Ğ¸ ĞºĞ°Ñ‡ĞµÑÑ‚Ğ²Ğ¾
- **Regulatory Changes**: ÑĞ¾Ğ¾Ñ‚Ğ²ĞµÑ‚ÑÑ‚Ğ²Ğ¸Ğµ Ñ‚Ñ€ĞµĞ±Ğ¾Ğ²Ğ°Ğ½Ğ¸ÑĞ¼
